<!DOCTYPE html>
<html>
<head>
<title>Gallery</title>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <link type="text/css" rel="stylesheet" href="./css/example.css" />

  <script src="./lib/jquery.js"></script>
  <script src="./lib/jquery-ui.js"></script>

  <script src="../draw2d.js"></script>

<script type="text/javascript">

document.addEventListener("DOMContentLoaded",function () {

    //
function undo() {
  canvas.getCommandStack().undo();
}

function redo() {
  canvas.getCommandStack().redo();
}

function updateButtons() {
  document.getElementById("undoBtn").disabled = !canvas.getCommandStack().canUndo();
  document.getElementById("redoBtn").disabled = !canvas.getCommandStack().canRedo();
}

    var canvas = new draw2d.Canvas("gfx_holder");
    canvas.setScrollArea("#gfx_holder");
    
    
    canvas.getCommandStack().addEventListener(function(e) {
      updateButtons();
    });
    updateButtons();

    /*
    var f = new draw2d.shape.layout.TableLayout();
    canvas.add(f);
    f.addRow("x");
    f.addRow("x", new draw2d.shape.basic.Label({text:"Test",bold:true, stroke:4, resizeable:true}), new draw2d.shape.basic.Label({text:"TEXT",bold:true, resizeable:true}),"x");
    f.addRow("x", "blubber", "TEXT1 for ever","x");
    f.addRow("x", "blubber", "TEXT2 for ever","x");
    f.addRow("x", "blubber", "TEXT3 for ever","x");
    f.addRow("x", "blubber", "TEXT4 for ever","x");
    f.addRow("x", "blubber", "TEXT5 for ever","x");
    f.addRow("x", "blubber", new draw2d.shape.node.Start(),"x");
    f.addRow("x", "blubber", "TEXT7 for ever","x");
    f.setCellVerticalAlign(1,2,"middle");
    f.setCellAlign(1,2,"center");
    f.setCellPadding(2,2,5);
    f.setCellPadding(6,2,10);
    f.attr({
    	stroke:1,
    	padding:10
    });

      f.removeRow(5);


    var table = new draw2d.shape.layout.VerticalLayout();
    canvas.add(table,200,100);
    table.add(new draw2d.shape.basic.Label({text:"Header of the table",bold:true, stroke:4, resizeable:true}));

    var grid = new draw2d.shape.layout.TableLayout({resizeable:true});
    grid.addRow(new draw2d.shape.basic.Label({text:"key1",resizeable:true}), new draw2d.shape.basic.Label({text:"value1",resizeable:true}));
    grid.addRow(new draw2d.shape.basic.Label({text:"key2",resizeable:true}), "value2");
    grid.addRow(new draw2d.shape.basic.Label({text:"key3",resizeable:true}), new draw2d.shape.basic.Label({text:"value3",resizeable:true}));
    grid.addRow(new draw2d.shape.basic.Label({text:"key4",resizeable:true}), "value4");
    grid.addRow(new draw2d.shape.basic.Label({text:"key5",resizeable:true}), "value5");
    grid.setCellAlign(1,1,"right");
    grid.setCellPadding(0,3,5);

    table.add(grid);

    */
    var label1 =  new draw2d.shape.basic.Label({text:"[0,1] with long long long long label", fontColor:"#00AF00"});
    var label2 =  new draw2d.shape.basic.Label({text:"[1,1] padding:10", fontColor:"#00AF00"});
    var label3 =  new draw2d.shape.basic.Label({text:"[2,1] align:right", fontColor:"#00AF00"});
    var label4 =  new draw2d.shape.basic.Label({text:"[3,1] resize:true",resizeable:true, fontColor:"#00AF00"});

    var container = new draw2d.shape.layout.TableLayout();

    container.addRow("[0,0]", label1 ,"[0,2] align:center");
    container.addRow("[1,0] valign:bottom", label2,"[1,2] long long long label");
    container.addRow("[2,0]", label3,"[2,2]");
    container.addRow("[3,0]", label4,"[3,2]");

    container.setPadding(0);
    container.setCellPadding(1,1, 10);

    container.setCellAlign(0,2, "center");
    container.setCellAlign(2,1, "right");

    container.setCellVerticalAlign(1, 0, "bottom");
    canvas.add(container,400,100);

    /*
    var table = new draw2d.shape.layout.FlexGridLayout({
        rows:"20px, 5px,grow,60px, 5px",
        columns:"15px, 20px, grow,20px",
        x:100,
        y:100
    });

    table.add(new draw2d.shape.basic.Label({text:"value", resizeable:true}), {row:0, col:0, colspan:4});
    table.add(new draw2d.shape.basic.Rectangle({stroke:1}), {row:3, col:1,colspan:3});
    canvas.add(table,200,200);
    */
});

</script>

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;  /* Verhindert Body/Window Scroll */
    }
    #container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100vw;
      position: relative;
    }
    #toolbar {
      flex-shrink: 0;
      height: 40px;
      background: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);
      border-bottom: 1px solid #ccc;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #toolbar button {
      padding: 5px 15px;
      border: 1px solid #999;
      border-radius: 4px;
      background: linear-gradient(to bottom, #fff 0%, #e8e8e8 100%);
      cursor: pointer;
    }
    #toolbar button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    #toolbar button:hover:not(:disabled) {
      background: linear-gradient(to bottom, #fff 0%, #d8d8d8 100%);
    }
    #scrollarea {
      flex: 1;
      overflow: auto;
      background-color: #FAFAFA;
      position: relative;
    }
    #gfx_holder {
      min-width: 3000px;
      min-height: 3000px;
      width: 3000px;
      height: 3000px;
    }
  </style>
</head>

<body>
<div id="container">
  <div id="toolbar">
  <button id="undoBtn" onclick="undo()" disabled>↩ Undo</button>
  <button id="redoBtn" onclick="redo()" disabled>↪ Redo</button>
</div>
  <div id="scrollarea">
    <div id="gfx_holder" style="width:3000px; height:3000px;"></div>
  </div>
</div>
</body>
</html>
